@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   Theme CSS Variables
   ============================================ */
:root {
  /* Font settings */
  font-family: "Inter var", "Inter", system-ui, -apple-system, sans-serif;
  font-feature-settings: "cv02", "cv03", "cv04", "cv11";

  /* Theme color variables (RGB values for opacity support) */
  --color-primary: 139 92 246;        /* violet-500 - default warm theme */
  --color-primary-light: 237 233 254; /* violet-100 */
  --color-accent: 249 115 22;         /* orange-500 */
  --color-accent-light: 255 247 237;  /* orange-50 */

  /* Background variables */
  --color-bg-base: 250 249 247;       /* warm off-white */
  --color-bg-card: 255 255 255;
  --color-bg-elevated: 255 255 255;

  /* Animation timing */
  --transition-fast: 150ms;
  --transition-normal: 200ms;
  --transition-slow: 300ms;
}

.dark {
  --color-bg-base: 26 26 46;          /* navy-purple base */
  --color-bg-card: 37 37 71;          /* dark card */
  --color-bg-elevated: 45 45 90;      /* elevated surfaces */
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

.dark ::-webkit-scrollbar-thumb {
  background: #4b5563;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: #6b7280;
}

/* Focus styles */
@layer base {
  *:focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2;
  }

  .dark *:focus-visible {
    @apply ring-offset-gray-900;
  }
}

/* Utility classes */
@layer utilities {
  .animate-in {
    animation: fadeIn 0.2s ease-out;
  }

  .text-balance {
    text-wrap: balance;
  }
}

/* ============================================
   Card Style Variants
   ============================================ */
@layer components {
  /* Base card styling */
  .card {
    @apply rounded-xl border border-gray-100 transition-all duration-200;
    background: linear-gradient(180deg, #ffffff 0%, #fefcfb 100%);
    box-shadow: 0 1px 3px rgb(var(--color-primary) / 0.04),
                0 4px 12px rgba(0, 0, 0, 0.03);
  }

  .card:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgb(var(--color-primary) / 0.08),
                0 8px 24px rgba(0, 0, 0, 0.04);
  }

  .dark .card {
    @apply border-dark-border;
    background: linear-gradient(180deg, rgb(var(--color-bg-card)) 0%, rgb(var(--color-bg-elevated)) 100%);
  }

  /* Card style variants (applied via root class) */
  .card-gradient .card {
    background: linear-gradient(180deg, #ffffff 0%, #fefcfb 100%);
  }

  .dark.card-gradient .card {
    background: linear-gradient(180deg, rgb(var(--color-bg-card)) 0%, rgb(var(--color-bg-elevated)) 100%);
  }

  .card-flat .card {
    background: #ffffff;
    box-shadow: none;
    @apply border-gray-200;
  }

  .dark.card-flat .card {
    background: rgb(var(--color-bg-card));
    @apply border-dark-border;
  }

  .card-bordered .card {
    background: #ffffff;
    box-shadow: none;
    @apply border-2 border-gray-200;
  }

  .dark.card-bordered .card {
    background: rgb(var(--color-bg-card));
    @apply border-dark-border;
  }

  /* Interactive card (clickable) */
  .card-interactive {
    @apply cursor-pointer;
  }

  .card-interactive:hover {
    transform: translateY(-2px);
  }

  /* Emoji icon container */
  .emoji-icon {
    @apply inline-flex items-center justify-center h-7 w-7 rounded-lg text-base;
    background: linear-gradient(135deg, rgb(var(--color-primary-light)) 0%, rgb(var(--color-primary-light) / 0.5) 100%);
  }

  .emoji-icon-accent {
    background: linear-gradient(135deg, rgb(var(--color-accent-light)) 0%, rgb(var(--color-accent-light) / 0.5) 100%);
  }
}

/* ============================================
   Animation Intensity Classes
   ============================================ */
/* Minimal motion - reduced animations for accessibility */
.motion-minimal,
.motion-minimal * {
  --transition-normal: 0ms !important;
  animation-duration: 0.01ms !important;
  transition-duration: 0.01ms !important;
}

.motion-minimal .card:hover {
  transform: none;
}

/* Moderate motion - balanced animations (default) */
.motion-moderate {
  --transition-normal: 200ms;
}

/* Playful motion - enhanced animations */
.motion-playful {
  --transition-normal: 250ms;
}

.motion-playful .card:hover {
  transform: translateY(-3px) scale(1.005);
}

.motion-playful .card-interactive:active {
  transform: translateY(0) scale(0.98);
}

/* TipTap editor styles */
.ProseMirror {
  outline: none;
  min-height: 200px;
  color: #1f2937; /* gray-800 for light mode */
}

.dark .ProseMirror {
  color: #f3f4f6; /* gray-100 for dark mode */
}

.ProseMirror h1,
.ProseMirror h2,
.ProseMirror h3 {
  color: #111827; /* gray-900 */
  font-weight: 600;
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
}

.dark .ProseMirror h1,
.dark .ProseMirror h2,
.dark .ProseMirror h3 {
  color: #ffffff;
}

.ProseMirror h1 {
  font-size: 1.875rem;
  line-height: 2.25rem;
}

.ProseMirror h2 {
  font-size: 1.5rem;
  line-height: 2rem;
}

.ProseMirror h3 {
  font-size: 1.25rem;
  line-height: 1.75rem;
}

.ProseMirror p {
  margin-bottom: 0.75rem;
}

.ProseMirror a {
  color: #2563eb; /* primary-600 */
  text-decoration: underline;
}

.dark .ProseMirror a {
  color: #60a5fa; /* primary-400 */
}

.ProseMirror blockquote {
  border-left: 4px solid #d1d5db;
  padding-left: 1rem;
  margin: 1rem 0;
  color: #6b7280;
  font-style: italic;
}

.dark .ProseMirror blockquote {
  border-left-color: #4b5563;
  color: #9ca3af;
}

.ProseMirror code {
  background-color: #f3f4f6;
  padding: 0.125rem 0.25rem;
  border-radius: 0.25rem;
  font-family: "JetBrains Mono", "Fira Code", monospace;
  font-size: 0.875em;
}

.dark .ProseMirror code {
  background-color: #374151;
  color: #f9fafb;
}

.ProseMirror pre {
  background-color: #1f2937;
  color: #f9fafb;
  padding: 1rem;
  border-radius: 0.5rem;
  overflow-x: auto;
  margin: 1rem 0;
}

.ProseMirror pre code {
  background-color: transparent;
  padding: 0;
  color: inherit;
}

.ProseMirror ul,
.ProseMirror ol {
  padding-left: 1.5rem;
  margin: 0.75rem 0;
}

.ProseMirror li {
  margin-bottom: 0.25rem;
}

.ProseMirror hr {
  border: none;
  border-top: 2px solid #e5e7eb;
  margin: 1.5rem 0;
}

.dark .ProseMirror hr {
  border-top-color: #374151;
}

.ProseMirror mark {
  background-color: #fef08a;
  padding: 0.125rem 0;
}

.dark .ProseMirror mark {
  background-color: #854d0e;
  color: #fef9c3;
}

.ProseMirror p.is-editor-empty:first-child::before {
  color: #9ca3af;
  content: attr(data-placeholder);
  float: left;
  height: 0;
  pointer-events: none;
}

.dark .ProseMirror p.is-editor-empty:first-child::before {
  color: #6b7280;
}

.ProseMirror ul[data-type="taskList"] {
  list-style: none;
  padding: 0;
}

.ProseMirror ul[data-type="taskList"] li {
  display: flex;
  align-items: flex-start;
}

.ProseMirror ul[data-type="taskList"] li > label {
  flex: 0 0 auto;
  margin-right: 0.5rem;
  user-select: none;
}

.ProseMirror ul[data-type="taskList"] li > div {
  flex: 1 1 auto;
}
